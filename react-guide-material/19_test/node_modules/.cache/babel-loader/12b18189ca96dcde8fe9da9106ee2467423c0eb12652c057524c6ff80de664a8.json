{"ast":null,"code":"import '../utils/click/isClickableInput.js';\nimport '../utils/dataTransfer/Clipboard.js';\nimport '../utils/edit/isEditable.js';\nimport '../utils/edit/maxLength.js';\nimport { getActiveElementOrBody } from '../utils/focus/getActiveElement.js';\nimport '@testing-library/dom/dist/helpers.js';\nimport '../utils/keyDef/readNextDescriptor.js';\nimport '../utils/misc/level.js';\nimport '../options.js';\nvar _pressed, _code, _code1;\nvar DOM_KEY_LOCATION;\n(function (DOM_KEY_LOCATION) {\n  DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"STANDARD\"] = 0] = \"STANDARD\";\n  DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"LEFT\"] = 1] = \"LEFT\";\n  DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"RIGHT\"] = 2] = \"RIGHT\";\n  DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"NUMPAD\"] = 3] = \"NUMPAD\";\n})(DOM_KEY_LOCATION || (DOM_KEY_LOCATION = {}));\nconst modifierKeys = ['Alt', 'AltGraph', 'Control', 'Fn', 'Meta', 'Shift', 'Symbol'];\nfunction isModifierKey(key) {\n  return modifierKeys.includes(key);\n}\nconst modifierLocks = ['CapsLock', 'FnLock', 'NumLock', 'ScrollLock', 'SymbolLock'];\nfunction isModifierLock(key) {\n  return modifierLocks.includes(key);\n}\nclass KeyboardHost {\n  isKeyPressed(keyDef) {\n    return !!this.pressed[String(keyDef.code)];\n  }\n  getPressedKeys() {\n    return Object.values(this.pressed).map(p => p.keyDef);\n  }\n  /** Press a key */\n  async keydown(instance, keyDef) {\n    const key = String(keyDef.key);\n    const code = String(keyDef.code);\n    const target = getActiveElementOrBody(instance.config.document);\n    this.setKeydownTarget(target);\n    var ref;\n    (ref = (_pressed = this.pressed)[_code = code]) !== null && ref !== void 0 ? ref : _pressed[_code] = {\n      keyDef,\n      unpreventedDefault: false\n    };\n    if (isModifierKey(key)) {\n      this.modifiers[key] = true;\n    }\n    const unprevented = instance.dispatchUIEvent(target, 'keydown', {\n      key,\n      code\n    });\n    if (isModifierLock(key) && !this.modifiers[key]) {\n      this.modifiers[key] = true;\n      this.modifierLockStart[key] = true;\n    }\n    (_code1 = this.pressed[code]).unpreventedDefault || (_code1.unpreventedDefault = unprevented);\n    if (unprevented && this.hasKeyPress(key)) {\n      instance.dispatchUIEvent(getActiveElementOrBody(instance.config.document), 'keypress', {\n        key,\n        code,\n        charCode: keyDef.key === 'Enter' ? 13 : String(keyDef.key).charCodeAt(0)\n      });\n    }\n  }\n  /** Release a key */\n  async keyup(instance, keyDef) {\n    const key = String(keyDef.key);\n    const code = String(keyDef.code);\n    const unprevented = this.pressed[code].unpreventedDefault;\n    // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n    delete this.pressed[code];\n    if (isModifierKey(key) && !Object.values(this.pressed).find(p => p.keyDef.key === key)) {\n      this.modifiers[key] = false;\n    }\n    instance.dispatchUIEvent(getActiveElementOrBody(instance.config.document), 'keyup', {\n      key,\n      code\n    }, !unprevented);\n    if (isModifierLock(key) && this.modifiers[key]) {\n      if (this.modifierLockStart[key]) {\n        this.modifierLockStart[key] = false;\n      } else {\n        this.modifiers[key] = false;\n      }\n    }\n  }\n  setKeydownTarget(target) {\n    if (target !== this.lastKeydownTarget) {\n      this.carryChar = '';\n    }\n    this.lastKeydownTarget = target;\n  }\n  hasKeyPress(key) {\n    return (key.length === 1 || key === 'Enter') && !this.modifiers.Control && !this.modifiers.Alt;\n  }\n  constructor(system) {\n    this.modifiers = {\n      Alt: false,\n      AltGraph: false,\n      CapsLock: false,\n      Control: false,\n      Fn: false,\n      FnLock: false,\n      Meta: false,\n      NumLock: false,\n      ScrollLock: false,\n      Shift: false,\n      Symbol: false,\n      SymbolLock: false\n    };\n    this.pressed = {};\n    this.carryChar = '';\n    this.lastKeydownTarget = undefined;\n    this.modifierLockStart = {};\n    this.system = system;\n  }\n}\nexport { DOM_KEY_LOCATION, KeyboardHost };","map":{"version":3,"names":["getActiveElementOrBody","_pressed","_code","_code1","DOM_KEY_LOCATION","modifierKeys","isModifierKey","key","includes","modifierLocks","isModifierLock","KeyboardHost","isKeyPressed","keyDef","pressed","String","code","getPressedKeys","Object","values","map","p","keydown","instance","target","config","document","setKeydownTarget","ref","unpreventedDefault","modifiers","unprevented","dispatchUIEvent","modifierLockStart","hasKeyPress","charCode","charCodeAt","keyup","find","lastKeydownTarget","carryChar","length","Control","Alt","constructor","system","AltGraph","CapsLock","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","undefined"],"sources":["/Users/furusawakoutarou/Desktop/programming/React/react-guide-material/19_test/node_modules/@testing-library/user-event/dist/esm/system/keyboard.js"],"sourcesContent":["import '../utils/click/isClickableInput.js';\nimport '../utils/dataTransfer/Clipboard.js';\nimport '../utils/edit/isEditable.js';\nimport '../utils/edit/maxLength.js';\nimport { getActiveElementOrBody } from '../utils/focus/getActiveElement.js';\nimport '@testing-library/dom/dist/helpers.js';\nimport '../utils/keyDef/readNextDescriptor.js';\nimport '../utils/misc/level.js';\nimport '../options.js';\n\nvar _pressed, _code, _code1;\nvar DOM_KEY_LOCATION;\n(function(DOM_KEY_LOCATION) {\n    DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"STANDARD\"] = 0] = \"STANDARD\";\n    DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"LEFT\"] = 1] = \"LEFT\";\n    DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"RIGHT\"] = 2] = \"RIGHT\";\n    DOM_KEY_LOCATION[DOM_KEY_LOCATION[\"NUMPAD\"] = 3] = \"NUMPAD\";\n})(DOM_KEY_LOCATION || (DOM_KEY_LOCATION = {}));\nconst modifierKeys = [\n    'Alt',\n    'AltGraph',\n    'Control',\n    'Fn',\n    'Meta',\n    'Shift',\n    'Symbol', \n];\nfunction isModifierKey(key) {\n    return modifierKeys.includes(key);\n}\nconst modifierLocks = [\n    'CapsLock',\n    'FnLock',\n    'NumLock',\n    'ScrollLock',\n    'SymbolLock', \n];\nfunction isModifierLock(key) {\n    return modifierLocks.includes(key);\n}\nclass KeyboardHost {\n    isKeyPressed(keyDef) {\n        return !!this.pressed[String(keyDef.code)];\n    }\n    getPressedKeys() {\n        return Object.values(this.pressed).map((p)=>p.keyDef);\n    }\n    /** Press a key */ async keydown(instance, keyDef) {\n        const key = String(keyDef.key);\n        const code = String(keyDef.code);\n        const target = getActiveElementOrBody(instance.config.document);\n        this.setKeydownTarget(target);\n        var ref;\n        (ref = (_pressed = this.pressed)[_code = code]) !== null && ref !== void 0 ? ref : _pressed[_code] = {\n            keyDef,\n            unpreventedDefault: false\n        };\n        if (isModifierKey(key)) {\n            this.modifiers[key] = true;\n        }\n        const unprevented = instance.dispatchUIEvent(target, 'keydown', {\n            key,\n            code\n        });\n        if (isModifierLock(key) && !this.modifiers[key]) {\n            this.modifiers[key] = true;\n            this.modifierLockStart[key] = true;\n        }\n        (_code1 = this.pressed[code]).unpreventedDefault || (_code1.unpreventedDefault = unprevented);\n        if (unprevented && this.hasKeyPress(key)) {\n            instance.dispatchUIEvent(getActiveElementOrBody(instance.config.document), 'keypress', {\n                key,\n                code,\n                charCode: keyDef.key === 'Enter' ? 13 : String(keyDef.key).charCodeAt(0)\n            });\n        }\n    }\n    /** Release a key */ async keyup(instance, keyDef) {\n        const key = String(keyDef.key);\n        const code = String(keyDef.code);\n        const unprevented = this.pressed[code].unpreventedDefault;\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete this.pressed[code];\n        if (isModifierKey(key) && !Object.values(this.pressed).find((p)=>p.keyDef.key === key)) {\n            this.modifiers[key] = false;\n        }\n        instance.dispatchUIEvent(getActiveElementOrBody(instance.config.document), 'keyup', {\n            key,\n            code\n        }, !unprevented);\n        if (isModifierLock(key) && this.modifiers[key]) {\n            if (this.modifierLockStart[key]) {\n                this.modifierLockStart[key] = false;\n            } else {\n                this.modifiers[key] = false;\n            }\n        }\n    }\n    setKeydownTarget(target) {\n        if (target !== this.lastKeydownTarget) {\n            this.carryChar = '';\n        }\n        this.lastKeydownTarget = target;\n    }\n    hasKeyPress(key) {\n        return (key.length === 1 || key === 'Enter') && !this.modifiers.Control && !this.modifiers.Alt;\n    }\n    constructor(system){\n        this.modifiers = {\n            Alt: false,\n            AltGraph: false,\n            CapsLock: false,\n            Control: false,\n            Fn: false,\n            FnLock: false,\n            Meta: false,\n            NumLock: false,\n            ScrollLock: false,\n            Shift: false,\n            Symbol: false,\n            SymbolLock: false\n        };\n        this.pressed = {};\n        this.carryChar = '';\n        this.lastKeydownTarget = undefined;\n        this.modifierLockStart = {};\n        this.system = system;\n    }\n}\n\nexport { DOM_KEY_LOCATION, KeyboardHost };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}